### 1.研究背景以及意义
- 渲染效率成为瓶颈：以动画电影《小门神》，镜头1940个，最终成片103分钟，总渲染核小时数8000万核小时。即如果用一台单核CPU机器渲染，需要渲染9000多年。
- 为了解决效率问题，超级计算机渲染，集群渲染，云渲染技术不断发展。本项目主要研究集群渲染。集群渲染又称渲染农场，采用分布式计算技术，将渲染任务分布到一个由主流计算机硬件组成的计算机集群中去。
- 传统的集群渲染管理软件，搭建复杂，所有快速搭建集群渲染管理系统，是本项目的目标其一。
- 在集群渲染中，由于渲染任务自身计算密集+IO密集的特点，与其他的分布式任务有很大不同，所以任务调度算法模块，对效率有一定的影响。针对渲染任务进行任务调度算法的优化，是本项目的目标其二。

### 2.拟定的技术路线
- 搭建轻量级分布式渲染管理系统
- 了解渲染原理，渲染器工作原理，分析渲染任务特点
- 优化任务调度算法，并在集群上实验

### 3.阶段性成果
- 成果一：已搭建轻量级分布式渲染管理系统demo
    - 现状：目前常用的集群渲染管理软件都具有搭建困难，安装复杂的缺点
    - 工具选取：
        - pip：python的包管理工具，用来管理项目所依赖的库
        - git：版本控制工具，用来管理项目的代码
        - docker：开源应用容器引擎，用来在linux上快速部署应用
    - 系统功能：
        - 文件上传，下载，管理
        - server端自动/手动发布任务到任务队列中
        - node端自动/手动获取到任务信息，根据任务信息下载任务资源，根据任务参数完成任务，上传任务结果
    - 系统优势：快速部署，部署流程如下所示
        - 测试环境部署
            0. 下载git
            1. 下载项目源代码：git clone + 项目git地址
            2. 建立python运行虚拟环境：python -m venv venv
            3. 在虚拟环境中下载项目依赖包：pip install -r docker/requirements.txt
            4. 将此节点部署为服务器：python server.py
            5. 将此节点部署为节点：python node.py
        - 在Linux上部署服务器
            0. 下载git，docker
            1. 下载项目源代码：git clone + 项目git地址
            2. 建立docker项目镜像：docker build -t 镜像名称 docker/dockerfile
            3. 建立docker项目容器：docker run -d -p 80:80 --name 项目名称 -v 主机项目地址:/app 项目镜像名称
    - 系统demo演示
- 成果二：任务调度算法基本方向
    - 提出并实验一种渲染任务复杂度量化评估算法（由项目组其他成员完成）
    - 提出一种渲染节点制约速度算法
        - 由于渲染任务体量很大，所以下载任务资源的过程同样耗费时间
        - 考虑带宽问题和节点自身性能，可能节点的下载速度和执行速度具有短板效应，即小的值会影响到节点的最终效率
        - 根据任务复杂度量化评估算法，分析渲染任务大小，任务复杂度和渲染时间的关系，最终得出节点的执行速度
        - 从而算出节点的制约速度
    - 提出并实验任务分配节点根据渲染节点制约速度实现对渲染任务调度的算法（实质上是动态规划来实现01背包问题，实验结果为在待分配任务量级比较大的时候，时间复杂度非常高。此算法还具有一定的优化空间。）
        - 数学模型（离散状态-平均大小）：总体量级为m个文件，每个文件的大小均为n，任务复杂度相同，node1的制约速度为v1，node2的制约速度为v2
            1. 给node1分配 mv1/(v1+v2) 个任务，因为有整数限制，所以对结果向下取整；同理给node2分配
            2. 这时还剩下1个任务未分配
            3. 计算：如果这1个任务给node1，所花费的【整体时间】，这个整体时间包括之前分配给node1的任务；同理计算node2的整体时间
            4. 谁所花费的整体时间更少，这个任务就分配给谁
            5. 易验证，这种情况下整体的效率最高
        - 数学模型（离散状态-离散大小）：
            - 因为有整数限制，所以简化为数学问题：在一堆数中取一个集合，使得集合内所有的数之和最接近期望值。即【背包问题】
            - 求解背包问题，按照上面流程分配任务
            - 只要背包问题的解是正确的，那么易验证，这种情况下整体的效率最高
        - 数学模型（离散状态-离散大小-动态）：
            - 当有新任务加进来的时候，对剩余部分继续执行背包问题算法
            - 已经下载的任务不推翻重新下载

### 4.下一阶段工作
- 完善渲染管理系统
- 了解渲染原理，渲染器工作原理，分析并实验渲染任务特点
- 优化以制约速度为基础的任务调度算法